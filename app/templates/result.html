<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Resultado de Predicci√≥n - Hepatitis IA</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}" />
  </head>
  <body>
    <div class="container">
      <div class="card">
        {% if result.error %}
        <div class="header">
          <div class="icon">‚ùå</div>
          <h1>Error en la Predicci√≥n</h1>
        </div>
        <div class="error-box">
          <strong>Error:</strong> {{ result.error }}
        </div>
        <div class="button-group">
          <a href="{{ url_for('index') }}" class="btn btn-primary">üîô Volver al Formulario</a>
        </div>
        {% else %}
        <div class="header">
          <div class="icon">{% if result.prediction == 1 %}‚ö†Ô∏è{% else %}‚úÖ{% endif %}</div>
          <h1>Resultado de la Predicci√≥n</h1>
        </div>

        <div class="result-box {% if result.prediction == 0 %}result-negative{% else %}result-positive{% endif %}">
          {% if result.prediction == 0 %}
            ‚úÖ NEGATIVO - Sin Riesgo Aparente
          {% else %}
            ‚ö†Ô∏è POSITIVO - Riesgo de Hepatitis Detectado
          {% endif %}
        </div>

        {% if result.predicted_probability is not none %}
        <div class="confidence">
          Confianza de la predicci√≥n:<br>
          <span class="confidence-value">{{ (result.predicted_probability * 100) | round(2) }}%</span>
        </div>
        {% endif %}

        <div class="interpretation">
          <div class="interpretation-title">üìã Interpretaci√≥n</div>
          {% if result.prediction == 0 %}
            <p>El modelo indica un <strong>resultado negativo</strong>, lo que sugiere que no hay indicadores significativos de hepatitis seg√∫n los datos proporcionados. Sin embargo, esto no reemplaza una evaluaci√≥n m√©dica profesional.</p>
          {% else %}
            <p>El modelo ha detectado un <strong>riesgo positivo de hepatitis</strong> basado en los datos proporcionados. Se recomienda consultar con un profesional m√©dico para realizar pruebas adicionales y confirmar el diagn√≥stico.</p>
          {% endif %}
        </div>

        {% if result.probabilities %}
        <div class="section-title">üìä Distribuci√≥n de Probabilidades</div>
        <div class="prob-row">
          <div class="prob-label">
            <span>‚úÖ Negativo (Sin Hepatitis)</span>
            <span>{{ (result.probabilities[0] * 100) | round(2) }}%</span>
          </div>
          <div class="bar-bg">
            {% set pct_neg = (result.probabilities[0] * 100) | round(2) %}
            <div class="bar" style="width: {{ pct_neg }}%;">
              {% if result.probabilities[0] > 0.1 %}{{ pct_neg }}%{% endif %}
            </div>
          </div>
        </div>
        <div class="prob-row">
          <div class="prob-label">
            <span>‚ö†Ô∏è Positivo (Con Hepatitis)</span>
            <span>{{ (result.probabilities[1] * 100) | round(2) }}%</span>
          </div>
          <div class="bar-bg">
            {% set pct_pos = (result.probabilities[1] * 100) | round(2) %}
            {% if result.probabilities[1] > 0.5 %}
            <div class="bar" style="width: {{ pct_pos }}%; background: linear-gradient(90deg, #ff6b6b 0%, #ee5a6f 100%);">
            {% else %}
            <div class="bar" style="width: {{ pct_pos }}%;">
            {% endif %}
              {% if result.probabilities[1] > 0.1 %}{{ pct_pos }}%{% endif %}
            </div>
          </div>
        </div>
        {% endif %}

        <details class="details">
          <summary style="cursor: pointer; font-weight: 600; color: #334155;">üîç Ver Detalles T√©cnicos</summary>
          <pre>{{ result }}</pre>
        </details>

        <div class="button-group">
          <a href="{{ url_for('index') }}" class="btn btn-primary">üîÑ Nueva Predicci√≥n</a>
        </div>

        <div style="margin-top: 25px; padding: 15px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
          <strong>‚ö†Ô∏è Aviso Importante:</strong> Este sistema es una herramienta de apoyo y no reemplaza el diagn√≥stico m√©dico profesional. Siempre consulte con un profesional de la salud calificado.
        </div>
        {% endif %}
      </div>
    </div>
  </body>
</html>
